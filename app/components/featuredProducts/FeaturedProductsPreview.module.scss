@use "../../styles/variables" as *;

/* ---------- Layout ---------- */
.section {
  padding: 3rem 1.5rem 3.5rem;
  overflow: hidden; // avoid sideways jiggle on mobile

  @media (min-width: $bp-md) {
    padding: 3.5rem 1.5rem 4rem;
  }
}

.inner {
  max-width: $max-width;
  margin: 0 auto;
}

.grid {
  display: grid;
  gap: 2.5rem;

  @media (min-width: $bp-md) {
    grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
    align-items: center;
  }
}

/* ---------- LEFT: Products slider ---------- */

.productsPane {
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
}

.productsHeader {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.miniLabel {
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: .06em;
  text-transform: uppercase;
  color: $color-purple;
}

.productsTitle {
  font-size: 1.4rem;
  font-weight: 700;

  @media (min-width: $bp-md) {
    font-size: 1.6rem;
  }
}

/* ---- Slider base (desktop uses flex) ---- */

$card-gap: 0.6rem;

.slider {
  position: relative;
  display: flex;
  gap: $card-gap;
  overflow-x: auto;
  padding: 0.4rem 0 0.9rem;
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  scroll-padding-inline: 0.75rem;

  /* subtle edge fade on non-mobile */
  mask-image: linear-gradient(to right, transparent 0, #000 18px, #000 calc(100% - 18px), transparent 100%);
}

.slider::-webkit-scrollbar {
  height: 6px;
}

.slider::-webkit-scrollbar-track {
  background: rgba($color-border-soft, .4);
  border-radius: 999px;
}

.slider::-webkit-scrollbar-thumb {
  background: rgba($color-purple, .4);
  border-radius: 999px;
}

/* ---- Swipe hint arrows (mobile only) ---- */
// .slider::before,
// .slider::after {
//   content: "‹";
//   position: absolute;
//   top: 50%;
//   transform: translateY(-50%);
//   width: 26px;
//   height: 26px;
//   border-radius: 999px;
//   background: rgba($color-white, .96);
//   color: $color-purple;
//   display: flex;
//   align-items: center;
//   justify-content: center;
//   font-size: .95rem;
//   box-shadow: $shadow-soft;
//   pointer-events: none;
//   opacity: .9;
// }

// .slider::after {
//   content: "›";
//   right: 6px;
// }

// .slider::before {
//   left: 6px;
// }

// @media (min-width: $bp-md) {

//   .slider::before,
//   .slider::after {
//     display: none;
//   }
// }

/* ---- Card ---- */
.card {
  scroll-snap-align: start;
  background: $color-white;
  border-radius: $radius-lg;
  box-shadow: $shadow-soft;
  overflow: hidden;
  display: flex;
  flex-direction: column;

  /* desktop = 3 visible */
  @media (min-width: $bp-md) {
    flex: 0 0 calc(33.333% - 0.7rem);
    max-width: none;
  }
}

/* ---------- MOBILE TUNING ---------- */
@media (max-width: $bp-md) {
  .productsTitle {
    font-size: 1.12rem;
  }

  /* Use grid for the horizontal list so 3 columns are ALWAYS on screen */
  .slider {
    margin-inline: 0;
    /* no negative margins -> prevents next box clipping */
    padding-inline: 0;
    /* let items use full width */
    mask-image: none;
    /* avoid right-edge crop */
    display: grid;
    /* switch from flex to grid */
    grid-auto-flow: column;
    grid-auto-columns: calc((100% - (2 * #{$card-gap})) / 3);
    /* 3 cards per viewport */
    gap: $card-gap;
  }

  .card {
    flex: 0 0 auto;
    /* ignore flex sizing on mobile */
    width: auto;
    /* width comes from grid-auto-columns */
    border-radius: $radius-md;
  }

  .cardImageWrapper {
    padding-top: 62%;
  }

  .cardBody {
    padding: .5rem .55rem .6rem;
  }

  .cardTitle {
    font-size: .78rem;
    margin-bottom: .18rem;
  }

  .cardPrice {
    font-size: .7rem;
    margin-bottom: .18rem;
  }

  .cardDescription {
    display: none;
  }

  // keep cards compact
}

/* Image area */
.cardImageWrapper {
  position: relative;
  width: 100%;
  padding-top: 70%;
  background: $color-cream;
}

.cardBody {
  padding: .9rem 1rem 1.1rem;
}

.cardTitle {
  font-size: .98rem;
  font-weight: 700;
  margin-bottom: .35rem;

  @media (max-width: $bp-sm) {
    font-size: .8rem;
  }
}

.cardPrice {
  font-size: .85rem;
  font-weight: 600;
  color: $color-purple;
  margin-bottom: .45rem;
}

.cardDescription {
  font-size: .85rem;
  color: $color-text-muted;
}

/* ---------- RIGHT: Featured product text box ---------- */

.textPane {
  background: radial-gradient(circle at top left, rgba($color-pink-soft, .9), rgba($color-cream, .95));
  border-radius: $radius-lg;
  padding: 1.6rem 1.4rem;
  box-shadow: $shadow-soft;
  display: flex;
  flex-direction: column;
  gap: .75rem;
  width: 100%;
  /* ensure it fits the screen */
  max-width: 100%;
  box-sizing: border-box;
  /* include padding in width calc */

  @media (min-width: $bp-md) {
    padding: 2rem 1.8rem;
  }
}

/* Smaller on mobile so it doesn’t feel oversized */
@media (max-width: $bp-md) {
  .textPane {
    padding: 1rem;
    gap: .5rem;
  }

  .heading {
    font-size: 1.12rem;
    line-height: 1.25;
  }

  .tagline {
    font-size: .82rem;
  }

  .list {
    font-size: .8rem;
    line-height: 1.35;
  }

  .note {
    font-size: .75rem;
  }
}

.badge {
  display: inline-flex;
  align-items: center;
  gap: .35rem;
  padding: .2rem .9rem;
  border-radius: $radius-pill;
  background: rgba($color-purple, .08);
  color: $color-purple;
  font-size: .78rem;
  font-weight: 600;
}

.heading {
  font-size: 1.5rem;
  line-height: 1.2;
}

.tagline {
  font-size: .9rem;
  color: $color-text-muted;
}

.list {
  margin: .2rem 0 0;
  padding-left: 1.1rem;
  font-size: .85rem;
  color: $color-text-muted;

  li+li {
    margin-top: .3rem;
  }
}

.note {
  margin-top: .4rem;
  font-size: .8rem;
  color: $color-text-muted;
}

/* ---------- Mobile stacking ---------- */
@media (max-width: $bp-md) {
  .grid {
    grid-template-columns: 1fr;
  }

  // products first, text second
  .section {
    padding: 2.5rem 1.2rem 3rem;
  }
}